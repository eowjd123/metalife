# Prisma 스키마 기반 추가 기능 분석 보고서

## 📊 현재 구현 현황

### ✅ 구현 완료된 기능

1. **접속현황** (`/admin/access-status`)
   - 일별/주별/월별 접속자 수
   - 사용 테이블: `TB_MEMBER_LOGIN_LOG`

2. **이용자관리** (`/admin/users`)
   - 회원관리 - `TB_MEMBER`
   - 관리자 관리 - `TB_ADMIN`
   - 관리자 접속 이력 - `TB_ADMIN_LOGIN_LOG`
   - 소속 그룹 관리 - `TB_GROUP`
   - 사용자 접속 이력 - `TB_MEMBER_LOGIN_LOG`

3. **라이선스 관리** (`/admin/products`)
   - 라이선스 관리 - `TB_LICENSE_CODE`
   - 사용중인 라이선스
   - 만료된 라이선스
   - 라이선스 이력 - `TB_LICENSE_HST` (간접 사용)

4. **서비스 계정 관리** (`/admin/orders`)
   - 스토리북 관리 - `TB_STORYBOOK` ✅
   - 수강생 관리 - 미구현
   - 수강생 로그인 이력 - 미구현

---

## 🚨 누락된 주요 기능 및 메뉴

### 1. 게시판 관리 📝

#### **TB_BOARD** (관리자 게시판)
- **필요한 기능**:
  - 게시글 목록 조회 (구분별: BO, NO, FR)
  - 게시글 작성/수정/삭제
  - 이미지 업로드 (board_image_1, board_image_2)
  - 답글 기능 (board_depth, board_sort)
  - 검색 및 필터링

- **제안 메뉴 구조**:
  ```
  /admin/board
    ├── /admin/board/notice (공지사항 - NO)
    ├── /admin/board/faq (FAQ - FR)
    └── /admin/board/general (일반 게시판 - BO)
  ```

#### **TB_BOARD_USER** (사용자 게시판)
- **필요한 기능**:
  - 사용자 문의/건의사항 목록
  - 답변 관리 (board_user_reply_YN)
  - 회원별 문의 내역 조회
  - 검색 및 필터링

- **제안 메뉴 구조**:
  ```
  /admin/board/user
    └── /admin/board/user/inquiries (사용자 문의 관리)
  ```

---

### 2. 콘텐츠 관리 시스템 (CMS) 📄

#### **TB_CMS_MST** (CMS 마스터)
- **필요한 기능**:
  - CMS 콘텐츠 목록
  - 콘텐츠 작성/수정/삭제
  - 이미지/동영상 관리 (cms_image_1~3, cms_movie_1)
  - 태그 관리
  - URL 관리

#### **TB_CMS_DTL** (CMS 상세)
- **필요한 기능**:
  - CMS 상세 데이터 관리
  - 코드 기반 데이터 입력 (MC00AA ~ MC000A)

- **제안 메뉴 구조**:
  ```
  /admin/cms
    ├── /admin/cms/list (CMS 목록)
    └── /admin/cms/[id] (CMS 상세/편집)
  ```

---

### 3. 코드 관리 시스템 🔧

#### **TB_CODE_MST** (코드 마스터)
- **필요한 기능**:
  - 시스템 코드 목록
  - 코드 그룹별 관리 (code_gcode, code_scode)
  - 코드 타입별 필터링 (RA, CK, IP)
  - 기본 코드 설정 (code_basic)
  - 코드 추가/수정/삭제

- **제안 메뉴 구조**:
  ```
  /admin/code
    └── /admin/code/list (코드 관리)
  ```

---

### 4. 링크 관리 🔗

#### **TB_LINK_MST** (링크 마스터)
- **필요한 기능**:
  - 링크 목록 관리
  - 링크 추가/수정/삭제
  - 클릭 통계 (link_cnt)
  - 도메인별 링크 관리

#### **TB_LINK_DTL** (링크 상세)
- **필요한 기능**:
  - 링크 클릭 이력 조회
  - 출발지별 통계

- **제안 메뉴 구조**:
  ```
  /admin/links
    ├── /admin/links/list (링크 관리)
    └── /admin/links/statistics (링크 통계)
  ```

---

### 5. 매뉴얼 관리 📚

#### **TB_MANUAL_MST** (매뉴얼 마스터)
- **필요한 기능**:
  - 매뉴얼 카테고리 관리 (SCHOOL, STORY, METAWARE)
  - 매뉴얼 목록
  - 조회수 통계 (manual_cnt)

#### **TB_MANUAL_DTL** (매뉴얼 상세)
- **필요한 기능**:
  - 매뉴얼 파일 관리
  - 파일 업로드/다운로드
  - 매뉴얼별 파일 목록

- **제안 메뉴 구조**:
  ```
  /admin/manual
    ├── /admin/manual/list (매뉴얼 목록)
    └── /admin/manual/[id] (매뉴얼 상세/파일 관리)
  ```

---

### 6. 로그 및 통계 관리 📊

#### **TB_ADMIN_WORK_LOG** (관리자 작업 로그)
- **필요한 기능**:
  - 관리자 작업 이력 조회
  - 작업별 통계
  - IP 추적
  - 기간별 필터링

- **제안 메뉴 구조**:
  ```
  /admin/logs
    └── /admin/logs/admin-work (관리자 작업 로그)
  ```

#### **TB_MEMBER_CONNECT_CNT** (회원 접속 통계)
- **필요한 기능**:
  - 도메인별 접속 통계
  - 일별/주별/월별 통계
  - 접속 도메인 상세 분석

- **제안 메뉴 구조**:
  ```
  /admin/statistics
    └── /admin/statistics/connect (접속 통계)
  ```

#### **TB_MEMBER_TRACE_LOG** (회원 추적 로그)
- **필요한 기능**:
  - 회원 활동 추적
  - 도메인별 활동 분석
  - 회원별 활동 이력

- **제안 메뉴 구조**:
  ```
  /admin/logs
    └── /admin/logs/member-trace (회원 추적 로그)
  ```

#### **TB_DOWNLOAD_LOG** (다운로드 로그)
- **필요한 기능**:
  - 다운로드 이력 조회
  - 구분별 통계 (A, B, C, D)
  - 회원별 다운로드 내역

- **제안 메뉴 구조**:
  ```
  /admin/logs
    └── /admin/logs/download (다운로드 로그)
  ```

#### **TB_NFC_LOGIN** (NFC 로그인)
- **필요한 기능**:
  - NFC 로그인 이력
  - NFC 키별 사용자 추적
  - NFC 로그인 통계

- **제안 메뉴 구조**:
  ```
  /admin/logs
    └── /admin/logs/nfc (NFC 로그인 로그)
  ```

---

### 7. 회원 관련 추가 기능 👥

#### **TB_MEMBER_LST** (회원 목록)
- **필요한 기능**:
  - 회원 목록 관리 (별도 테이블)
  - 라이선스 정보 관리 (license_YN, licenseType, licenseGrade)
  - 마케팅 수신 동의 관리
  - 회원 가입 이력

- **제안 메뉴 구조**:
  ```
  /admin/users
    └── /admin/users/member-list (회원 목록 관리)
  ```

#### **TB_MEMBER_RULE** (회원 규칙)
- **필요한 기능**:
  - 회원 규칙 목록
  - 규칙 추가/수정/삭제
  - 규칙 구분별 관리

- **제안 메뉴 구조**:
  ```
  /admin/users
    └── /admin/users/rules (회원 규칙 관리)
  ```

---

### 8. 서비스 계정 관리 - 추가 기능 🎓

#### **수강생 관리** (현재 미구현)
- **필요한 기능**:
  - 수강생 목록 (TB_MEMBER에서 필터링 또는 별도 테이블)
  - 수강생 정보 관리
  - 그룹별 수강생 조회

#### **수강생 로그인 이력** (현재 미구현)
- **필요한 기능**:
  - 수강생별 로그인 이력
  - 기간별 통계
  - 도메인별 분석

---

## 📋 우선순위별 구현 제안

### 🔴 높은 우선순위 (핵심 기능)

1. **게시판 관리** (`TB_BOARD`, `TB_BOARD_USER`)
   - 관리자 공지사항 및 FAQ 관리
   - 사용자 문의/건의사항 관리
   - **예상 작업량**: 중

2. **로그 관리 통합** (`TB_ADMIN_WORK_LOG`, `TB_DOWNLOAD_LOG`, `TB_NFC_LOGIN`)
   - 관리자 작업 추적
   - 다운로드 이력 관리
   - **예상 작업량**: 중

3. **수강생 관리** (서비스 계정 관리 완성)
   - 수강생 목록 및 관리
   - 수강생 로그인 이력
   - **예상 작업량**: 중

### 🟡 중간 우선순위 (유용한 기능)

4. **매뉴얼 관리** (`TB_MANUAL_MST`, `TB_MANUAL_DTL`)
   - 사용자 매뉴얼 관리
   - 파일 업로드/다운로드
   - **예상 작업량**: 중

5. **코드 관리** (`TB_CODE_MST`)
   - 시스템 코드 관리
   - 코드 그룹별 관리
   - **예상 작업량**: 낮음

6. **접속 통계 확장** (`TB_MEMBER_CONNECT_CNT`, `TB_MEMBER_TRACE_LOG`)
   - 도메인별 접속 통계
   - 회원 활동 추적
   - **예상 작업량**: 중

### 🟢 낮은 우선순위 (선택적 기능)

7. **CMS 관리** (`TB_CMS_MST`, `TB_CMS_DTL`)
   - 콘텐츠 관리 시스템
   - 복잡한 코드 기반 구조
   - **예상 작업량**: 높음

8. **링크 관리** (`TB_LINK_MST`, `TB_LINK_DTL`)
   - 링크 관리 및 통계
   - **예상 작업량**: 낮음

9. **회원 목록 관리** (`TB_MEMBER_LST`)
   - 별도 회원 목록 테이블
   - **예상 작업량**: 낮음

10. **회원 규칙 관리** (`TB_MEMBER_RULE`)
    - 회원 규칙 설정
    - **예상 작업량**: 낮음

---

## 🎯 제안하는 메뉴 구조

```
/admin
├── /dashboard (대시보드)
├── /access-status (접속현황) ✅
│   ├── 일별 접속자 수
│   ├── 주별 접속자 수
│   └── 월별 접속자 수
├── /users (이용자관리) ✅
│   ├── 회원관리
│   ├── 관리자 관리
│   ├── 관리자 접속 이력
│   ├── 소속 그룹 관리
│   ├── 사용자 접속 이력
│   ├── 회원 목록 관리 (신규)
│   └── 회원 규칙 관리 (신규)
├── /products (라이선스 관리) ✅
│   ├── 라이선스 관리
│   ├── 사용중인 라이선스
│   └── 만료된 라이선스
├── /orders (서비스 계정 관리) ⚠️
│   ├── 서비스 계정 현황
│   ├── 스토리북 관리 ✅
│   ├── 수강생 관리 (미구현)
│   └── 수강생 로그인 이력 (미구현)
├── /board (게시판 관리) 🆕
│   ├── 공지사항
│   ├── FAQ
│   ├── 일반 게시판
│   └── 사용자 문의 관리
├── /cms (콘텐츠 관리) 🆕
│   └── CMS 목록
├── /code (코드 관리) 🆕
│   └── 코드 관리
├── /manual (매뉴얼 관리) 🆕
│   └── 매뉴얼 목록
├── /links (링크 관리) 🆕
│   ├── 링크 관리
│   └── 링크 통계
├── /logs (로그 관리) 🆕
│   ├── 관리자 작업 로그
│   ├── 다운로드 로그
│   ├── NFC 로그인 로그
│   └── 회원 추적 로그
└── /statistics (통계 관리) 🆕
    └── 접속 통계
```

---

## 💡 구현 시 고려사항

### 1. 데이터 관계
- 현재 Prisma 스키마에 관계 정의가 없음
- 외래키는 Int 타입으로만 존재
- 조인 쿼리 시 수동으로 처리 필요

### 2. Soft Delete 패턴
- 모든 테이블에 `*_del_YN` 필드 존재
- 삭제 시 실제 데이터 삭제가 아닌 플래그 변경
- 모든 쿼리에 `*_del_YN = 'N'` 조건 필수

### 3. 날짜 형식
- 일부 필드(`license_startdate`, `license_enddate`)가 String 타입
- DateTime 타입과 혼용 사용 주의

### 4. 인덱스 활용
- `*_del_YN` 필드에 인덱스 설정됨
- 조회 성능 최적화를 위해 인덱스 활용

### 5. 권한 관리
- `TB_ADMIN`의 `admin_gubun` 필드로 권한 구분
- 기능별 접근 권한 체크 필요

---

## 📝 결론

현재 **24개의 테이블** 중 **약 8개 테이블**이 직접 활용되고 있으며, **16개 테이블**이 아직 미구현 상태입니다.

**즉시 구현 권장**:
1. 게시판 관리 (공지사항, FAQ, 사용자 문의)
2. 로그 관리 통합 (작업 로그, 다운로드 로그, NFC 로그인)
3. 수강생 관리 완성

**추가 고려 사항**:
- 각 기능별로 검색, 필터링, 페이징 기능 필요
- 통계 및 대시보드 통합 고려
- 파일 업로드 기능 (매뉴얼, 게시판 이미지 등)

